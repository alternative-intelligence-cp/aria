%macro GEN_POP 1
func:popcount_%1 = *int32(%1:x) {
    int32:count = 0;
    %1:val = x;
    int32:i = 0;
    while (i < 8) {
        if ((val & 1) != 0) {
            count = count + 1;
        }
        val = val >> 1;
        i = i + 1;
    }
    return count;
};
%endmacro

%macro GEN_CLZ 1
func:clz_%1 = *int32(%1:x) {
    if (x == 0) {
        return 8;
    }
    int32:count = 0;
    %1:mask = 1 << 7;
    while ((x & mask) == 0) {
        count = count + 1;
        mask = mask >> 1;
    }
    return count;
};
%endmacro

GEN_POP(int8)
GEN_CLZ(int8)

func:main = *int8() {
    return 0;
};
