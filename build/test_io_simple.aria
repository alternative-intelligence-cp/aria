// Simple test of file I/O
func:intrinsic_open = int32(uint8@:pathname, int32:flags, int32:mode);
func:intrinsic_write = int64(int32:fd, uint8@:buffer, uint64:count);
func:intrinsic_close = int32(int32:fd);

func:main = int8() {
    // Write to stdout (fd=1)
    uint8:msg[14];
    msg[0] = 72;   // 'H'
    msg[1] = 101;  // 'e'
    msg[2] = 108;  // 'l'
    msg[3] = 108;  // 'l'
    msg[4] = 111;  // 'o'
    msg[5] = 32;   // ' '
    msg[6] = 70;   // 'F'
    msg[7] = 105;  // 'i'
    msg[8] = 108;  // 'l'
    msg[9] = 101;  // 'e'
    msg[10] = 73;  // 'I'
    msg[11] = 79;  // 'O'
    msg[12] = 33;  // '!'
    msg[13] = 10;  // '\n'
    
    int64:written = intrinsic_write(1, msg, 14);
    
    pass(0);
};
